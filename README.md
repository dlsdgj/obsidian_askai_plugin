# Ask AI 插件
在 Obsidian 中选中文本并调用 AI API 返回结果

## 功能特点
- **文本选择调用 AI**：选中文本后自动显示悬浮按钮，点击即可调用 AI 分析或处理选中内容
- **多种 AI 服务支持**：内置支持 KIMI、DeepSeek、智谱等 AI API，可在设置中配置多个 API
- **预设模板系统**：提供多个预设的提问模板，支持模板管理和自定义，可快速应用不同场景的提问方式
- **上下文感知**：智能识别选中内容和上下文，使 AI 回答更精准
- **格式化工具**：提供清除格式、移除HTML标签、移除空行、调整标题层级等文本处理功能
- **自动化模式**：支持快捷键触发自动化流程，AI回复完成后自动执行预设操作序列
- **自定义快捷键**：支持悬浮球中键点击和二级菜单自定义快捷键功能
- **紧凑设置界面**：优化的设置页面布局，支持响应式设计，提高配置效率
- **便捷操作**：支持复制 AI 回答、插入编辑器、保存为文件、流式输出等便捷功能

## 安装方法
或者通过手动安装：
1. 下载最新的发布版本
2. 解压到 Obsidian 的插件目录（`.obsidian/plugins/`）
3. 重启 Obsidian 并在设置中启用插件

## 使用方法
1. 选中文本并点击悬浮按钮
2. 鼠标悬停在 "编辑问题" 选项上，会显示模板二级菜单
3. 选择一个预设模板，插件会自动应用该模板并发送给 AI
4. 模板中会自动填充选中的内容（通过 `{{selection}}` 变量）和上下文（通过 `{{context}}` 变量）


## 配置选项

在插件设置中，您可以配置以下选项：

### AI API 配置
- 添加或修改 AI API 服务（URL、API Key、模型名称等）
- 设置默认使用的 AI API

### 模板配置
- 查看、编辑和添加预设模板
- 设置默认使用的模板

### 自动化模式配置
- 设置触发自动化模式的快捷键
- 配置AI回复完成后要执行的操作序列（脚本）

### 自定义快捷键配置
- 配置悬浮球中键点击执行的快捷键组合
- 设置悬浮球二级菜单自定义快捷键名称和按键组合

### 自定义文本配置
- 设置弹窗中插入自定义文本按钮的名称
- 配置自定义文本内容，支持变量替换

### 界面配置
- 设置AI回答的字体样式
- 配置悬浮球的显示行为

自动化脚本支持以下命令：
- `自定义插入内容` 或 `insertcustomtext`：插入配置的自定义文本到AI回复中
- `清除格式` 或 `clearformat`：清除AI回复中的Markdown格式
- `插入` 或 `insert` 或 `inserttoeditor`：将AI回复插入到当前Markdown编辑器中
- `复制` 或 `copy`：复制AI回复内容到剪贴板
- `closemodal`：关闭AI回复模态框
- `pressKey('key', altKey, ctrlKey, shiftKey, metaKey)`：模拟键盘快捷键，例如 `pressKey('a', true, true, false, false)` 表示 Alt+Ctrl+A

36| ## 模板语法

模板中支持以下变量：

- `{{selection}}`：表示您在编辑器中选中的文本内容
- `{{context}}`：表示选中内容周围的上下文信息

## 许可证
MIT License
## 更新日志
### 版本 1.3.1
- **自动化脚本优化**：移除 sleep 命令支持，简化脚本执行逻辑
- **pressKey 命令完善**：修复 pressKey 命令参数解析问题，确保键盘快捷键正确执行
- **执行时机优化**：优化 pressKey 命令执行时机，确保在模态框关闭后正确触发
- **代码简化**：简化自动化脚本执行逻辑，提高稳定性和可维护性
- **文档更新**：更新自动化脚本命令文档，添加 pressKey 命令详细说明

### 版本 1.3.0
- **界面优化**：重新设计设置页面布局，采用紧凑的四列布局显示API配置
- **响应式设计**：设置页面支持不同屏幕尺寸的自适应布局（大屏4列、中屏2列、小屏1列）
- **空间优化**：显著减少设置页面的垂直空间占用，提高配置效率
- **功能简化**：移除冗余的"启用自动化模式"开关，简化用户界面
- **视觉优化**：保持默认API的视觉突出显示，优化整体用户体验

### 版本 1.2.3
- 增强自动化模式功能，添加inserttoeditor命令支持
- 更新自动化脚本命令列表和文档说明

### 版本 1.2.2
- 新增自动化模式功能，支持快捷键触发并自动执行操作序列
- 添加自动化脚本支持，可配置AI回复完成后的操作步骤

### 版本 1.2.1.1
- 添加保存为md文件功能

### 版本 1.2.1
- 设置页面添加弹窗中底部自定义按钮的设置, AI回复完,点击按钮可插入自定义文本到回复中


## 致谢
感谢您使用 Ask AI 插件！如有任何问题或建议，请在 GitHub 上提交 issue。
作者：nilmarkov
